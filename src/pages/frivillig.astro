---
import MainLayout from "../layouts/MainLayout.astro";
---
<MainLayout title="Bliv frivillig">
  <main>

    <!-- Intro -->
    <section class="section relative z-10">
      <div class="container-site grid grid-cols-1 lg:grid-cols-2 gap-6">
        <!-- Venstre side: intro-tekst -->
        <div>
          <h1 data-inview="text" class="title t-h1">Vær en del af fællesskabet</h1>
          <p data-inview="text" class="t-p">
            Bliv en del af vores mission om at gøre vores samfund mere sikkert.
            Som frivillig bidrager du med din tid og empati til at skabe positive forandringer.
            Sammen kan vi gøre en reel forskel.
          </p>
        </div>
      </div>
      <!-- Stjerne under intro -->
      <div class="absolute right-10 bottom-20 justify-center animate-wiggle animate-infinite animate-duration-[6000ms] animate-ease-linear">
        <img src="/star2.svg" alt="stjerne" class="hidden w-72 md:block" />
      </div>
    </section>

    <!-- formular og dekoration -->
    <section class="section relative overflow-hidden mb-10">

      <!-- Indhold -->
      <div class="container-site flex justify-center relative z-10">

        <!-- Formular -->
        <form id="volunteerForm" class="card overflow-hidden max-w-2xl w-full mb-4">
          <!-- Pink header -->
          <div class="accentpink card mb-4">
            <h2 class="text-white t-h2">Bliv frivillig</h2>
            <h3 class="text-white t-h3 mt-2">
              Du behøver ikke special erfaring; du skal blot have tid, empati og lyst
              til at være der for andre. Vi sørger for oplæring og giver dig alt,
              du skal bruge for at kunne hjælpe andre.
            </h3>
          </div>

          <!-- Formular indhold -->
          <div class="space-y-4">
            <p class="t-p">Udfyld formularen, så vender vi tilbage til dig hurtigst muligt</p>

            <div class="grid grid-cols-1 gap-4">
              <input type="text" placeholder="Fornavn" class="border border-pink-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-pink-500" />
              <input type="text" placeholder="Efternavn" class="border border-pink-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-pink-500" />
            </div>

            <input type="email" placeholder="E-mail" class="w-full border border-pink-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-pink-500" />
            <input type="tel" placeholder="Telefonnummer" class="w-full border border-pink-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-pink-500" />

            <div class="space-y-2">
              <label class="text-sm">Fødselsdag:</label>
              <div class="grid grid-cols-3 gap-3">
                <select class="border border-pink-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-pink-500">
                  <option>Dag</option>
                  {Array.from({ length: 31 }, (_, i) => <option>{i + 1}</option>)}
                </select>
                <select class="border border-pink-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-pink-500">
                  <option>Måned</option>
                  {["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"].map(m => <option>{m}</option>)}
                </select>
                <select class="border border-pink-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-pink-500">
                  <option>År</option>
                  {Array.from({ length: 26 }, (_, i) => <option>{1980 + i}</option>)}
                </select>
              </div>
            </div>

            <div class="space-y-2">
              <label class="text-sm">Motiverende ansøgning:</label>
              <textarea
                placeholder="Kort tekst om dig selv og hvorfor du vil være frivillig..."
                class="w-full border border-pink-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-pink-500 h-32"
              ></textarea>
            </div>

            <label class="flex items-center gap-2 text-sm">
              <input type="checkbox" class="w-4 h-4 border border-pink-300 rounded" />
              <span>Jeg ønsker at modtage nyhedsbreve og opdateringer fra Gå Med Mig</span>
            </label>

            <button type="submit" class="w-full accentpink text-white font-semibold py-3 rounded-lg hover:opacity-90 transition cursor-pointer">
              Send ansøgning
            </button>
          </div>
        </form>

        <!-- Tak-besked -->
        <div id="thankYou" class="card overflow-hidden max-w-2xl w-full hidden">
          <div class="card accentpink p-6 mb-6">
            <h2 class="text-white t-h2">Tak for din ansøgning!</h2>
          </div>
          <div class="space-y-4">
            <p class="t-p">Vi er rigtig glade for din interesse i at blive frivillig hos Gå Med Mig.</p>
            <p class="t-p">Din ansøgning er modtaget, og vi vender tilbage hurtigst muligt.</p>
            <p class="t-p">Spørgsmål? Skriv til gaamedmigfrivillig@gmail.com.</p>
            <div class="pt-4">
              <a href="/" class="inline-block bg-pink-600 text-white font-semibold py-3 px-6 rounded-lg hover:opacity-90 transition">
                Tilbage til forsiden
              </a>
            </div>
          </div>
        </div>

      </div>

      <!-- Venstre stjerne -->
      <div class="hidden md:block absolute left-[-6rem] top-1/2 -translate-y-1/2 z-10">
        <div class="flex justify-center animate-wiggle animate-infinite animate-duration-[5000ms] animate-ease-linear">
          <img
            src="/star2.svg"
            alt="stjerne"
            class="w-46 md:w-72 pointer-events-none"
          />
        </div>
      </div>

      <!-- Højre stjerne -->
      <div class="absolute right-0 top-0 z-10">
        <div class="flex justify-center animate-wiggle animate-infinite animate-duration-[6000ms] animate-ease-linear">
          <img
            src="/star4.svg"
            alt="stjerne"
            class="w-32 md:w-56 pointer-events-none"
          />
        </div>
      </div>

      <!-- Bølgelinje placeret udenfor formular-container, z-0 -->
      <img
        src="/line2.svg"
        alt="linje"
        class="absolute bottom-0 w-full pointer-events-none z-0"
      />

    </section>

  </main>
</MainLayout>

<script>
  // @ts-nocheck
  const form = document.getElementById('volunteerForm');
  const thankYou = document.getElementById('thankYou');

  form.addEventListener('submit', (e) => {
    e.preventDefault();
    form.classList.add('hidden');
    thankYou.classList.remove('hidden');
  });

  import { inView, animate } from "motion";

  function initTextInView() {
    const reduced = window.matchMedia("(prefers-reduced-motion: reduce)").matches;
    if (reduced) return;

    const targets = document.querySelectorAll('[data-inview="text"]');

    targets.forEach((el) => {
      if (el.dataset.inviewReady) return;
      el.dataset.inviewReady = "true";

      animate(el, { opacity: 0, y: 14 }, { duration: 0 });

      inView(
        el,
        () => {
          if (el.dataset.inviewDone) return;
          el.dataset.inviewDone = "true";

          animate(el, { opacity: 1, y: 0 }, { duration: 0.6, easing: "ease-out" });
        },
        { amount: 0.2 }
      );
    });
  }

  const init = () => {
    initTextInView();
  };

  document.addEventListener("DOMContentLoaded", init, { once: true });
  document.addEventListener("astro:page-load", init);

</script>
