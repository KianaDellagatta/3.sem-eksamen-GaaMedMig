---
type Variant = "grad1" | "grad2" | "grad3";
type Size = "default" | "icon-sm" | "icon-md" | "icon-lg";

const {
  href,
  variant = "grad1",
  size = "default",
  type = "button",
  disabled = false,
  className = "",
  ariaLabel,
} = Astro.props as {
  href?: string;
  variant?: Variant;
  size?: Size;
  type?: "button" | "submit" | "reset";
  disabled?: boolean;
  className?: string;
  ariaLabel?: string;
};

/* Accessibility guard for icon-only buttons */
if (size.startsWith("icon") && !ariaLabel) {
  console.warn("Icon buttons must have an ariaLabel");
}

/* Variant → class */
const variantClass: Record<Variant, string> = {
  grad1: "btn-grad-1",
  grad2: "btn-grad-2",
  grad3: "btn-grad-3",
};

/* Size → class */
const sizeClass: Record<Size, string> = {
  default: "",
  "icon-sm": "icon-btn icon-btn-sm",
  "icon-md": "icon-btn icon-btn-md",
  "icon-lg": "icon-btn icon-btn-lg",
};

/* Final class string */
const baseClasses = [
  "btn-base",
  variantClass[variant],
  sizeClass[size],
  className,
]
  .filter(Boolean)
  .join(" ");
---

{href ? (
  <a
    href={href}
    class={baseClasses}
    aria-label={ariaLabel}
    aria-disabled={disabled ? "true" : undefined}
    tabindex={disabled ? -1 : undefined}
  >
    <slot />
  </a>
) : (
  <button
    type={type}
    class={baseClasses}
    disabled={disabled}
    aria-label={ariaLabel}
  >
    <slot />
  </button>
)}