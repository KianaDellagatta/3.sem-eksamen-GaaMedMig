---
const { date, time, place, title, description, descriptionLong } = Astro.props;
---

<article
  x-data="{
    open: false,
    isMobile: window.matchMedia('(max-width: 767px)').matches,
    init() {
      const mq = window.matchMedia('(max-width: 767px)');
      const sync = () => (this.isMobile = mq.matches);
      sync();
      mq.addEventListener?.('change', sync);
    }
  }"
  class="group relative flex overflow-hidden"
  style={{
    borderRadius: 'var(--radius-card)',
    background: 'var(--color-surface)',
  }}
>
  <!-- LEFT / META -->
  <div
    class="relative shrink-0 text-white -ml-6 md:ml-0"
    style={{ background: 'var(--pink-400)', minWidth: '180px' }}
  >
    <!-- Icons -->
    <div
      class="flex flex-col gap-4 px-8 py-4
             transition-opacity duration-300
             md:group-hover:opacity-0"
    >
      <div class="flex items-center gap-3">
        <img src="/Date.svg" alt="" class="w-7" />
        <span class="font-medium">{date}</span>
      </div>

      <div class="flex items-center gap-3">
        <img src="/Time.svg" alt="" class="w-7" />
        <span class="font-medium">{time}</span>
      </div>

      <div class="flex items-center gap-3">
        <img src="/place.svg" alt="" class="w-6" />
        <span class="font-medium">{place}</span>
      </div>
    </div>

    <!-- Desktop CTA overlay -->
    <div
      class="absolute inset-0 hidden md:flex items-center justify-center
             opacity-0 pointer-events-none
             transition-opacity duration-300
             md:group-hover:opacity-100 md:group-hover:pointer-events-auto"
    >
      <a href="#" class="btn-base btn-grad-1">
        Køb billet
      </a>
    </div>

    <!-- Mobile CTA -->
    <div class="px-6 pb-6 pt-2 md:hidden">
      <a
        href="#"
        x-show="open"
        x-transition.opacity
        class="btn-base btn-grad-1 inline-flex justify-center w-full"
      >
        Køb billet
      </a>
    </div>
  </div>

  <!-- RIGHT / CONTENT -->
  <div
    class="relative flex-1"
    style={{
      paddingInline: 'clamp(16px, 5vw, 160px)',
      paddingBlock: 'var(--card-padding)',
    }}
  >
    <div>
      <!-- Smaller title on mobile -->
      <h2 class="t-eventcard-h2 mb-2 text-lg md:text-xl lg:text-2xl">
        {title}
      </h2>

      <!-- Desktop short description -->
      <p class="t-eventcard-p transition-opacity duration-300 md:group-hover:opacity-0 hidden md:block">
        {description}
      </p>

      <!-- Mobile toggle -->
      <button
        type="button"
        class="btn-base btn-grad-3 mt-4 md:hidden"
        @click="open = !open"
      >
        <span x-text="open ? 'Se mindre' : 'Se mere'"></span>
      </button>

      <!-- Mobile expanded text -->
      <div class="mt-4 md:hidden overflow-hidden" x-show="open" x-transition>
        <p class="t-eventcard-p">
          {descriptionLong}
        </p>
      </div>
    </div>

    <!-- Desktop hover long text -->
    <div
      class="absolute inset-0 hidden md:flex
             opacity-0 transition-opacity duration-300
             md:group-hover:opacity-100"
      style={{
        paddingInline: 'clamp(16px, 5vw, 160px)',
        paddingBlock: 'var(--card-padding)',
      }}
    >
      <div class="mt-12">
        <p class="t-eventcard-p line-clamp-5">
          {descriptionLong}
        </p>
      </div>
    </div>
  </div>
</article>
