---
const { logoSrc = "/Logo.svg", logoAlt = "Gå med mig" } = Astro.props;
const pathname = Astro.url.pathname;

const navItems = [
  { label: "Støt", href: "/stoet" },
  { label: "Om", href: "/om" },
  { label: "Events", href: "/events" },
];
---

<header class="container-site" aria-label="Top navigation">
  <div
    class="mt-6"
    x-data="{ open: false }"
    @keydown.escape.window="open = false"
    @click.outside="open = false"
  >
    <!-- PILL -->
    <nav class="nav-pill" aria-label="Hovedmenu">
      <!-- Logo left (inside pill) -->
      <a href="/" class="nav-logo glow-link" aria-label="Gå til forsiden">
        <img src={logoSrc} alt={logoAlt} class="w-full h-full object-contain" />
      </a>

      <!-- Desktop links -->
      <div class="hidden lg:flex items-center gap-10">
        {navItems.map((item) => (
          <a
            href={item.href}
            class="nav-link glow-link"
            aria-current={pathname === item.href ? "page" : undefined}
          >
            {item.label}
          </a>
        ))}
      </div>

      <!-- Mobile burger (inside pill, right side) -->
      <button
        type="button"
        class="nav-burger lg:hidden"
        @click="open = !open"
        :aria-expanded="open.toString()"
        aria-controls="mobile-menu"
        aria-label="Åbn menu"
      >
        <svg
          width="44"
          height="44"
          viewBox="0 0 24 24"
          fill="none"
          aria-hidden="true"
        >
          <path
            d="M4 7h16M4 12h16M4 17h16"
            stroke="currentColor"
            stroke-width="2.5"
            stroke-linecap="round"
          />
        </svg>
      </button>
    </nav>

    <!-- Mobile dropdown -->
    <div
      id="mobile-menu"
      class="nav-menu lg:hidden"
      x-show="open"
      x-transition.opacity.duration.200ms
    >
      <div class="flex flex-col items-center gap-4">
        {navItems.map((item) => (
          <a
            href={item.href}
            class="nav-link glow-link"
            aria-current={pathname === item.href ? "page" : undefined}
            @click="open = false"
          >
            {item.label}
          </a>
        ))}
      </div>
    </div>
  </div>
</header>